<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>use-machine-ts</title><meta name="description" content="Documentation for use-machine-ts"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">use-machine-ts</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>use-machine-ts</h2></div><div class="tsd-panel tsd-typography"><p><strong>The tiny <em>state machine</em> hook for React</strong></p>
<p><a href="https://github.com/tai-kun/use-machine-ts/actions/workflows/ci.yaml"><img src="https://github.com/tai-kun/use-machine-ts/actions/workflows/ci.yaml/badge.svg" alt="CI"></a>
<a href="https://github.com/tai-kun/use-machine-ts/actions/workflows/release.yaml"><img src="https://github.com/tai-kun/use-machine-ts/actions/workflows/release.yaml/badge.svg" alt="Release on NPM"></a>
<a href="https://github.com/tai-kun/use-machine-ts/actions/workflows/canary-release.yaml"><img src="https://github.com/tai-kun/use-machine-ts/actions/workflows/canary-release.yaml/badge.svg" alt="Canary Release on NPM"></a></p>
<p><a href="https://bundlephobia.com/package/use-machine-ts"><img src="https://img.shields.io/bundlephobia/minzip/use-machine-ts/latest" alt="npm bundle size"></a>
<a href="https://www.npmjs.com/package/use-machine-ts"><img src="https://img.shields.io/npm/v/use-machine-ts" alt="npm version"></a>
<a href="https://www.npmjs.com/package/use-machine-ts?activeTab=versions"><img src="https://img.shields.io/npm/v/use-machine-ts/canary" alt="npm canary version"></a></p>
<p><a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-red.svg" alt="License: MIT"></a></p>
<p align="center">English (MT) | <a href="media/README.ja.md">æ—¥æœ¬èªž</a></p>
<p>use-machine-ts is a tiny hook for designing state machines in React. It follows the familiar idiomatic React patterns, making it easy to manage state transitions.</p>
<details>
<summary>Bundle Size</summary>
<pre><code class="typescript"><span class="hl-0">// 973 B</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-0">// 1.37 KB</span><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-5">*</span><span class="hl-2"> </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-0">// 1 KB</span><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-5">*</span><span class="hl-2"> </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts/standard&quot;</span><br/><br/><span class="hl-0">// 1.04 KB</span><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-5">*</span><span class="hl-2"> </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts/shared&quot;</span><br/><br/><span class="hl-0">// 1.08 KB</span><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-5">*</span><span class="hl-2"> </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts/synced&quot;</span><br/><br/><span class="hl-0">// 11.12 KB</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">createMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;xstate@5.9.1&quot;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;@xstate/react@4.1.0&quot;</span>
</code><button type="button">Copy</button></pre>

</details>
<a id="md:respect" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Respect<a href="#md:respect" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>use-machine-ts is inspired by <a href="https://github.com/cassiozen/useStateMachine">@cassiozen/usestatemachine</a>.</p>
<details>
<summary>Difference between use-machine-ts and @cassiozen/usestatemachine</summary>
<ul>
<li>The state machine definition is split into one or two parts.
The separated items are debug-related settings and the actual implementations of guard and effect functions.
Since the implementation is not included within the state transition definitions, you get the following benefits:
<ul>
<li>You can focus on deliberating state transitions.</li>
<li>The logs when state transitions are guarded become clear, making debugging easier.
(See: <a href="#md:using-guards">Using Guards</a>)</li>
</ul>
</li>
<li>The special function <code>t</code> for defining context and event types is no longer needed.
Instead, you can define schema types using <code>{} as &lt;types...&gt;</code>.</li>
<li>You can create state machines in advance.</li>
<li>Asynchronous state updates for state machines have become relatively safer.
Specifically, behavior has improved when the component is already unmounted.
(See: <a href="#md:async-orchestration">Async Orchestration</a>)</li>
<li>Besides <code>useMachine</code>, two additional convenient hooks are provided:
<ul>
<li><code>useSharedMachine</code>:
Allows sharing state between multiple React components.
You can also manage state transitions from outside React components.</li>
<li><code>useSyncedMachine</code>:
Re-rendering is not triggered when the state transitions.
This hook provides a function that returns a snapshot of the state rather than the current state.</li>
</ul>
</li>
<li>ðŸ˜¢ The required version of React has been raised from 16.8 to 18.</li>
<li>ðŸ˜¢ The bundle size has increased. Compared to <code>useMachine</code>, there's an increase of about 400 bytes (+60%).</li>
</ul>
</details>
<a id="md:basic-features" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Basic Features<a href="#md:basic-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><code>useMachine</code>:
Essentially a wrapper around <code>useState</code> and <code>useEffect</code>.
Manages state transitions in the same way as <code>useState</code>.</li>
<li><code>useSharedMachine</code>:
Essentially a wrapper around <code>useSyncExternalStore</code> and <code>useEffect</code>.
Allows sharing state between multiple React components.
You can also manage state transitions from outside React components.</li>
<li><code>useSyncedMachine</code>:
Similar to <code>useMachine</code>, but re-rendering is not triggered every time the state transitions.
This hook provides a function that returns a snapshot of the state rather than the current state.</li>
<li><code>createMachine</code>:
Creates a state machine. Useful for reusing state machine definitions across different components.
Can be used with <code>useMachine</code> and <code>useSyncedMachine</code>.</li>
<li><code>createSharedMachine</code>:
Similar to <code>createMachine</code>, but can only be used with <code>useSharedMachine</code>.</li>
</ul>
<a id="md:installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation<a href="#md:installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To install the latest stable version:</p>
<pre><code class="sh"><span class="hl-6">npm</span><span class="hl-2"> </span><span class="hl-4">install</span><span class="hl-2"> </span><span class="hl-4">use-machine-ts</span>
</code><button type="button">Copy</button></pre>

<p>To install the canary version:</p>
<pre><code class="sh"><span class="hl-6">npm</span><span class="hl-2"> </span><span class="hl-4">install</span><span class="hl-2"> </span><span class="hl-4">use-machine-ts@canary</span>
</code><button type="button">Copy</button></pre>

<a id="md:sample-usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Sample Usage<a href="#md:sample-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">initial:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-3">states:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">inactive:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> {</span><br/><span class="hl-2">            </span><span class="hl-3">target:</span><span class="hl-2"> </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">            </span><span class="hl-3">guard:</span><span class="hl-2"> </span><span class="hl-4">&quot;isReady&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">          },</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">      </span><span class="hl-3">active:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">        </span><span class="hl-3">effect:</span><span class="hl-2"> </span><span class="hl-4">&quot;onActive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">guards:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-6">isReady</span><span class="hl-3">:</span><span class="hl-2"> () </span><span class="hl-5">=&gt;</span><span class="hl-2"> </span><span class="hl-5">true</span><span class="hl-2">,</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">    </span><span class="hl-3">effects:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-6">onActive</span><span class="hl-3">:</span><span class="hl-2"> () </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">&quot;Now in the &#39;active&#39; state!&quot;</span><span class="hl-2">)</span><br/><br/><span class="hl-2">        </span><span class="hl-1">return</span><span class="hl-2"> () </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">&quot;Now in the &#39;inactive&#39; state!&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">        }</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">)</span><br/><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-3">state</span><span class="hl-2">)</span><br/><span class="hl-0">// { value: &quot;inactive&quot;, context: undefined,</span><br/><span class="hl-0">//   event: { type: &quot;$init&quot; }, nextEvents: [&quot;TOGGLE&quot;] }</span><br/><br/><span class="hl-6">send</span><span class="hl-2">(</span><span class="hl-4">&quot;TOGGLE&quot;</span><span class="hl-2">)</span><br/><span class="hl-0">// Logs: Now in the &#39;active&#39; state!</span><br/><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-3">state</span><span class="hl-2">)</span><br/><span class="hl-0">// { value: &quot;active&quot;, context: undefined,</span><br/><span class="hl-0">//   event: { type: &quot;TOGGLE&quot; }, nextEvents: [&quot;TOGGLE&quot;] }</span>
</code><button type="button">Copy</button></pre>

<a id="md:todo" class="tsd-anchor"></a><h2 class="tsd-anchor-link">TODO<a href="#md:todo" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>[x] Implement basic functionality.</li>
<li>[ ] Fix some incomplete tests.</li>
<li>[ ] Test with <code>preact/compat</code>.</li>
<li>[ ] Ensure compatibility with React v19.</li>
</ul>
<a id="md:contents" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Contents<a href="#md:contents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="#md:api">API</a>
<ul>
<li><a href="#md:usemachine">useMachine</a>
<ul>
<li><a href="#md:state">state</a></li>
<li><a href="#md:send">send</a></li>
<li><a href="#md:state-machine-definition">State Machine Definition</a></li>
<li><a href="#md:defining-states">Defining States</a></li>
<li><a href="#md:using-guards">Using Guards</a></li>
<li><a href="#md:using-effects">Using Effects</a></li>
<li><a href="#md:extended-state">Extended State</a></li>
<li><a href="#md:Schema">Schema</a></li>
<li><a href="#md:logging">Logging</a></li>
</ul>
</li>
<li><a href="#md:usesharedmachine">useSharedMachine</a></li>
<li><a href="#md:usesyncedmachine">useSyncedMachine</a></li>
</ul>
</li>
<li><a href="#md:async-orchestration">Async Orchestration</a>
<ul>
<li><a href="#md:usemachine-1">useMachine</a></li>
<li><a href="#md:usesharedmachine-1">useSharedMachine</a></li>
<li><a href="#md:usesyncedmachine-1">useSyncedMachine</a></li>
</ul>
</li>
</ul>
<a id="md:api" class="tsd-anchor"></a><h1 class="tsd-anchor-link">API<a href="#md:api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://tai-kun.github.io/use-machine-ts/">API Reference</a></p>
<a id="md:usemachine" class="tsd-anchor"></a><h2 class="tsd-anchor-link">useMachine<a href="#md:usemachine" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="https://tai-kun.github.io/use-machine-ts/functions/useMachine.html">API Reference</a></p>
<p>To create an ad-hoc state machine:</p>
<pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-0">/* State Machine Definition */</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">/* State Machine Configuration (Optional) */</span><span class="hl-2">,</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<p>To use a pre-built state machine:</p>
<pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useMachine</span><span class="hl-2">, </span><span class="hl-3">createMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-7">machine</span><span class="hl-2"> = </span><span class="hl-0">/* @__PURE__ */</span><span class="hl-2"> </span><span class="hl-6">createMachine</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-0">/* State Machine Definition */</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-0">/* State Machine Configuration (Optional) */</span><span class="hl-2">,</span><br/><span class="hl-2">)</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><span class="hl-3">machine</span><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<p>Or use the constructor:</p>
<pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useMachine</span><span class="hl-2">, </span><span class="hl-3">createMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">function</span><span class="hl-2"> </span><span class="hl-6">machine</span><span class="hl-2">() {</span><br/><span class="hl-2">  </span><span class="hl-1">return</span><span class="hl-2"> </span><span class="hl-6">createMachine</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-0">/* State Machine Definition */</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-0">/* State Machine Configuration (Optional) */</span><span class="hl-2">,</span><br/><span class="hl-2">  )</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><span class="hl-3">machine</span><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<a id="md:state" class="tsd-anchor"></a><h3 class="tsd-anchor-link">state<a href="#md:state" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>state</code> consists of four properties: <code>value</code>, <code>event</code>, <code>nextEvents</code>, and <code>context</code>.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Property</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>value</code></td>
<td style="text-align:left"><code>string</code></td>
<td style="text-align:left">The current state, such as <code>&quot;inactive&quot;</code> or <code>&quot;active&quot;</code>.</td>
</tr>
<tr>
<td style="text-align:left"><code>event</code></td>
<td style="text-align:left"><code>object</code></td>
<td style="text-align:left">The last event that was sent, causing the current state. For example, <code>{ type: &quot;TOGGLE&quot; }</code>. Initially, it is <code>{ type: &quot;$init&quot; }</code>.</td>
</tr>
<tr>
<td style="text-align:left"><code>nextEvents</code></td>
<td style="text-align:left"><code>string[]</code></td>
<td style="text-align:left">A list of events that can be sent in the current state, such as <code>[&quot;TOGGLE&quot;]</code>.</td>
</tr>
<tr>
<td style="text-align:left"><code>context</code></td>
<td style="text-align:left"><code>any</code></td>
<td style="text-align:left">The extended state of the state machine. See <a href="#md:extended-state">Extended State</a>.</td>
</tr>
</tbody>
</table>
<a id="md:send" class="tsd-anchor"></a><h3 class="tsd-anchor-link">send<a href="#md:send" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>send</code> function is used to send events to the state machine. It takes a single argument, which can be a string representing the event type (e.g., <code>&quot;TOGGLE&quot;</code>) or an object (e.g., <code>{ type: &quot;TOGGLE&quot; }</code>).</p>
<p>If the current state accepts the event and a transition is possible (see <a href="#md:using-guards">Guards</a>), the state machine's state will be updated, and any associated effects will be executed (see <a href="#md:using-effects">Effects</a>).</p>
<p>You can send additional data using the object format for events (e.g., <code>{ type: &quot;TOGGLE&quot;, value: 10 }</code>). For information on defining event types, see <a href="#md:schema">Schema</a>.</p>
<a id="md:state-machine-definition" class="tsd-anchor"></a><h3 class="tsd-anchor-link">State Machine Definition<a href="#md:state-machine-definition" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th style="text-align:left">Property</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Required</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>initial</code></td>
<td style="text-align:left"><code>string</code></td>
<td style="text-align:left">âœ…</td>
<td style="text-align:left">Defines the initial state of the state machine.</td>
</tr>
<tr>
<td style="text-align:left"><code>states</code></td>
<td style="text-align:left"><code>object</code></td>
<td style="text-align:left">âœ…</td>
<td style="text-align:left">Defines the finite states the state machine can be in. (See: <a href="#md:defining-states">Defining States</a>)</td>
</tr>
<tr>
<td style="text-align:left"><code>on</code></td>
<td style="text-align:left"><code>object</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">Defines transitions for events not accepted in the current state. (See: <a href="#md:defining-states">Defining States</a>)</td>
</tr>
<tr>
<td style="text-align:left"><code>context</code></td>
<td style="text-align:left"><code>any</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">Defines the extended state of the state machine. (See: <a href="#md:extended-state">Extended State</a>)</td>
</tr>
<tr>
<td style="text-align:left"><code>$schema</code></td>
<td style="text-align:left"><code>object</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">Defines the schema of the state machine by type. (See: <a href="#md:schema">Schema</a>)</td>
</tr>
</tbody>
</table>
<a id="md:state-machine-configuration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">State Machine Configuration<a href="#md:state-machine-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th style="text-align:left">Property</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>guards</code></td>
<td style="text-align:left"><code>object</code></td>
<td style="text-align:left">Defines guard functions for the state machine. (See: <a href="#md:using-guards">Using Guards</a>)</td>
</tr>
<tr>
<td style="text-align:left"><code>effects</code></td>
<td style="text-align:left"><code>object</code></td>
<td style="text-align:left">Defines effect functions for the state machine. (See: <a href="#md:using-effects">Using Effects</a>)</td>
</tr>
<tr>
<td style="text-align:left"><code>verbose</code></td>
<td style="text-align:left"><code>boolean</code> <code>0</code> <code>1</code> <code>2</code></td>
<td style="text-align:left">Enables debug logging. (See: <a href="#md:logging">Logging</a>)</td>
</tr>
<tr>
<td style="text-align:left"><code>console</code></td>
<td style="text-align:left"><code>object</code></td>
<td style="text-align:left">Defines a custom console for logging output. (See: <a href="#md:logging">Logging</a>)</td>
</tr>
</tbody>
</table>
<a id="md:defining-states" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Defining States<a href="#md:defining-states" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>A state machine can only be in one of a finite number of states at any given time. Additionally, states can only change in response to events.</p>
<p>States are defined as keys in the <code>states</code> object, and event types are defined as keys in the <code>on</code> object within each state.</p>
<pre><code class="typescript"><span class="hl-2">{</span><br/><span class="hl-2">  </span><span class="hl-8">states</span><span class="hl-2">: {</span><br/><span class="hl-2">    </span><span class="hl-0">// state name: state object</span><br/><span class="hl-2">    </span><span class="hl-8">inactive</span><span class="hl-2">: {</span><br/><span class="hl-2">      </span><span class="hl-8">on</span><span class="hl-2">: { </span><span class="hl-0">// event definition</span><br/><span class="hl-2">        </span><span class="hl-8">TOGGLE</span><span class="hl-2">: </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2">, </span><span class="hl-0">// Event type: Destination state value</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">    </span><span class="hl-8">active</span><span class="hl-2">: {</span><br/><span class="hl-2">      </span><span class="hl-8">on</span><span class="hl-2">: {</span><br/><span class="hl-2">        </span><span class="hl-8">TOGGLE</span><span class="hl-2">: </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>In event definitions, you can use objects with a <code>target</code> property to control state transitions in more detail (such as adding guards).</p>
<pre><code class="typescript"><span class="hl-2">{</span><br/><span class="hl-2">  </span><span class="hl-8">on</span><span class="hl-2">: {</span><br/><span class="hl-2">    </span><span class="hl-8">TOGGLE</span><span class="hl-2">: {</span><br/><span class="hl-2">      </span><span class="hl-8">target</span><span class="hl-2">: </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-8">guard</span><span class="hl-2">: </span><span class="hl-4">&quot;isReady&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:using-guards" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Using Guards<a href="#md:using-guards" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Guards are functions that execute before a state transition occurs. If a guard returns <code>true</code>, the state transition is allowed. If a guard returns <code>false</code>, the state transition is denied.</p>
<pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">initial:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-3">states:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">inactive:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> {</span><br/><span class="hl-2">            </span><span class="hl-3">target:</span><span class="hl-2"> </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">            </span><span class="hl-3">guard:</span><span class="hl-2"> </span><span class="hl-4">&quot;isReady&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">          },</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">      </span><span class="hl-3">active:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">guards:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-6">isReady</span><span class="hl-3">:</span><span class="hl-2"> () </span><span class="hl-5">=&gt;</span><span class="hl-2"> </span><span class="hl-5">true</span><span class="hl-2">,</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<p>use-machine-ts provides three helper functions: <code>and</code>, <code>or</code>, and <code>not</code>. You can use these functions to create complex guards.</p>
<pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">and</span><span class="hl-2">, </span><span class="hl-3">not</span><span class="hl-2">, </span><span class="hl-3">or</span><span class="hl-2">, </span><span class="hl-3">useMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">initial:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-3">states:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">inactive:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> {</span><br/><span class="hl-2">            </span><span class="hl-3">target:</span><span class="hl-2"> </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">            </span><span class="hl-3">guard:</span><span class="hl-2"> </span><span class="hl-6">and</span><span class="hl-2">(</span><span class="hl-6">or</span><span class="hl-2">(</span><span class="hl-4">&quot;isReady&quot;</span><span class="hl-2">, </span><span class="hl-4">&quot;isStopped&quot;</span><span class="hl-2">), </span><span class="hl-6">not</span><span class="hl-2">(</span><span class="hl-4">&quot;isDestroyed&quot;</span><span class="hl-2">)),</span><br/><span class="hl-2">          },</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">      </span><span class="hl-3">active:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">guards:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-6">isReady</span><span class="hl-3">:</span><span class="hl-2"> () </span><span class="hl-5">=&gt;</span><span class="hl-2"> </span><span class="hl-5">true</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-6">isStopped</span><span class="hl-3">:</span><span class="hl-2"> () </span><span class="hl-5">=&gt;</span><span class="hl-2"> </span><span class="hl-5">true</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-6">isDestroyed</span><span class="hl-3">:</span><span class="hl-2"> () </span><span class="hl-5">=&gt;</span><span class="hl-2"> </span><span class="hl-5">true</span><span class="hl-2">,</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<p>The <code>and</code> function can be replaced with a simple array.</p>
<pre><code class="typescript"><span class="hl-6">and</span><span class="hl-2">(</span><span class="hl-6">or</span><span class="hl-2">(</span><span class="hl-4">&quot;isReady&quot;</span><span class="hl-2">, </span><span class="hl-4">&quot;isStopped&quot;</span><span class="hl-2">), </span><span class="hl-6">not</span><span class="hl-2">(</span><span class="hl-4">&quot;isDestroyed&quot;</span><span class="hl-2">))</span><br/><span class="hl-0">// equals</span><br/><span class="hl-2">[</span><span class="hl-6">or</span><span class="hl-2">(</span><span class="hl-4">&quot;isReady&quot;</span><span class="hl-2">, </span><span class="hl-4">&quot;isStopped&quot;</span><span class="hl-2">), </span><span class="hl-6">not</span><span class="hl-2">(</span><span class="hl-4">&quot;isDestroyed&quot;</span><span class="hl-2">)]</span>
</code><button type="button">Copy</button></pre>

<p>If a guard ultimately returns <code>false</code>, the following log will be output:</p>
<pre><code class="console"><span class="hl-2">Transition from &#39;inactive&#39; to &#39;active&#39; denied by guard.</span><br/><span class="hl-2">((isReady || isStopped) &amp;&amp; !isDestroyed)</span><br/><span class="hl-2">                           ^^^^^^^^^^^^ </span><br/><span class="hl-2">Event { type: &quot;TOGGLE&quot; }</span><br/><span class="hl-2">Context undefined</span>
</code><button type="button">Copy</button></pre>

<p>The <code>^</code> indicates the guard that caused the state transition to be denied. In the example above, <code>isDestroyed</code> returning <code>true</code> caused the state transition to be denied.</p>
<blockquote>
<p>[!IMPORTANT]<br>
<code>and</code> without any guards always returns <code>true</code>.
<code>or</code> without any guards always returns <code>false</code>.</p>
</blockquote>
<a id="md:using-effects" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Using Effects<a href="#md:using-effects" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Effects are functions that execute when the state machine enters a specific state. If the effect returns a function, that function is executed when leaving that state. This behavior is similar to the <code>useEffect</code> hook in React.</p>
<pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">initial:</span><span class="hl-2"> </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-3">states:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">active:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">        </span><span class="hl-3">effect:</span><span class="hl-2"> </span><span class="hl-4">&quot;onActive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">effects:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-6">onActive</span><span class="hl-3">:</span><span class="hl-2"> </span><span class="hl-3">entryParams</span><span class="hl-2"> </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">&quot;Entered &#39;active&#39; state!&quot;</span><span class="hl-2">)</span><br/><br/><span class="hl-2">        </span><span class="hl-1">return</span><span class="hl-2"> </span><span class="hl-3">exitParams</span><span class="hl-2"> </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">&quot;Left from &#39;active&#39; state!&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">        }</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<p>The <code>effect</code> property can accept an array instead of a string.</p>
<pre><code class="typescript"><span class="hl-2">{</span><br/><span class="hl-2">   </span><span class="hl-8">effect</span><span class="hl-2">: [</span><br/><span class="hl-2">     </span><span class="hl-4">&quot;onActive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">     </span><span class="hl-4">&quot;onTransition&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">   ],</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>Effect functions receive an object (<code>entryParams</code>) with the following four properties as a parameter:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Property</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>event</code></td>
<td style="text-align:left"><code>object</code></td>
<td style="text-align:left">The event that triggered the transition to the current state. The event is always in object format (e.g., <code>{ type: &quot;TOGGLE&quot; }</code>).</td>
</tr>
<tr>
<td style="text-align:left"><code>context</code></td>
<td style="text-align:left"><code>any</code></td>
<td style="text-align:left">The extended state of the state machine.</td>
</tr>
<tr>
<td style="text-align:left"><code>send</code></td>
<td style="text-align:left"><code>function</code></td>
<td style="text-align:left">A function to send events to the state machine.</td>
</tr>
<tr>
<td style="text-align:left"><code>setContext</code></td>
<td style="text-align:left"><code>function</code></td>
<td style="text-align:left">A function to update the extended state of the state machine. It returns an object with the <code>send</code> property, allowing you to update the <code>context</code> and transition states in one line.</td>
</tr>
<tr>
<td style="text-align:left"><code>isMounted</code></td>
<td style="text-align:left"><code>function</code></td>
<td style="text-align:left">A function to check if the component is mounted.</td>
</tr>
</tbody>
</table>
<p>The function returned by the effect function receives an object (<code>exitParams</code>) with the following four properties as a parameter:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Property</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>event</code></td>
<td style="text-align:left"><code>object</code></td>
<td style="text-align:left">The event that triggered the transition from the current state. The event is always in object format (e.g., <code>{ type: &quot;TOGGLE&quot; }</code>).</td>
</tr>
<tr>
<td style="text-align:left"><code>context</code></td>
<td style="text-align:left"><code>any</code></td>
<td style="text-align:left">The extended state of the state machine.</td>
</tr>
<tr>
<td style="text-align:left"><code>send</code></td>
<td style="text-align:left"><code>function</code></td>
<td style="text-align:left">A function to send events to the state machine.</td>
</tr>
<tr>
<td style="text-align:left"><code>setContext</code></td>
<td style="text-align:left"><code>function</code></td>
<td style="text-align:left">A function to update the extended state of the state machine. It returns an object with the <code>send</code> property, allowing you to update the <code>context</code> and transition states in one line.</td>
</tr>
<tr>
<td style="text-align:left"><code>isMounted</code></td>
<td style="text-align:left"><code>function</code></td>
<td style="text-align:left">A function to check if the component is mounted.</td>
</tr>
</tbody>
</table>
<p>In the following example, the <code>retryCount</code> is updated every time the state changes to <code>failure</code>, and if the limit is reached, it transitions to an error state.</p>
<pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">initial:</span><span class="hl-2"> </span><span class="hl-4">&quot;loading&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-3">context:</span><span class="hl-2"> { </span><span class="hl-3">retryCount:</span><span class="hl-2"> </span><span class="hl-9">0</span><span class="hl-2"> },</span><br/><span class="hl-2">    </span><span class="hl-3">states:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">loading:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-3">FAILURE:</span><span class="hl-2"> </span><span class="hl-4">&quot;failure&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">          </span><span class="hl-3">DONE:</span><span class="hl-2"> </span><span class="hl-4">&quot;done&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">      </span><span class="hl-3">failure:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-3">RETRY:</span><span class="hl-2"> </span><span class="hl-4">&quot;loading&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">          </span><span class="hl-3">ERROR:</span><span class="hl-2"> </span><span class="hl-4">&quot;error&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">        </span><span class="hl-3">effect:</span><span class="hl-2"> </span><span class="hl-4">&quot;onFailure&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">      </span><span class="hl-3">error:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-3">RETRY:</span><span class="hl-2"> </span><span class="hl-4">&quot;loading&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">        </span><span class="hl-3">effect:</span><span class="hl-2"> [</span><br/><span class="hl-2">          </span><span class="hl-4">&quot;onError&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">          </span><span class="hl-4">&quot;resetRetryCount&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">        ],</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">      </span><span class="hl-3">done:</span><span class="hl-2"> {},</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">effects:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-6">onFailure</span><span class="hl-3">:</span><span class="hl-2"> ({ </span><span class="hl-3">context</span><span class="hl-2">, </span><span class="hl-3">send</span><span class="hl-2">, </span><span class="hl-3">setContext</span><span class="hl-2"> }) </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-1">if</span><span class="hl-2"> (</span><span class="hl-3">context</span><span class="hl-2">.</span><span class="hl-3">retryCount</span><span class="hl-2"> &lt; </span><span class="hl-9">3</span><span class="hl-2">) {</span><br/><span class="hl-2">          </span><span class="hl-6">setContext</span><span class="hl-2">(</span><span class="hl-3">ctx</span><span class="hl-2"> </span><span class="hl-5">=&gt;</span><span class="hl-2"> ({ </span><span class="hl-3">retryCount:</span><span class="hl-2"> </span><span class="hl-3">ctx</span><span class="hl-2">.</span><span class="hl-3">retryCount</span><span class="hl-2"> + </span><span class="hl-9">1</span><span class="hl-2"> })).</span><span class="hl-6">send</span><span class="hl-2">(</span><span class="hl-4">&quot;RETRY&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">        } </span><span class="hl-1">else</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-6">send</span><span class="hl-2">(</span><span class="hl-4">&quot;ERROR&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">        }</span><br/><br/><span class="hl-2">        </span><span class="hl-1">return</span><span class="hl-2"> ({ </span><span class="hl-3">event</span><span class="hl-2"> }) </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-1">if</span><span class="hl-2"> (</span><span class="hl-3">event</span><span class="hl-2">.</span><span class="hl-3">type</span><span class="hl-2"> === </span><span class="hl-4">&quot;RETRY&quot;</span><span class="hl-2">) {</span><br/><span class="hl-2">            </span><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">&quot;Retrying...&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">          } </span><span class="hl-1">else</span><span class="hl-2"> {</span><br/><span class="hl-2">            </span><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">&quot;The number of retries has reached the upper limit!&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">          }</span><br/><span class="hl-2">        }</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">      </span><span class="hl-6">onError</span><span class="hl-3">:</span><span class="hl-2"> () </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">&quot;Error state entered!&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">      </span><span class="hl-6">resetRetryCount</span><span class="hl-3">:</span><span class="hl-2"> ({ </span><span class="hl-3">setContext</span><span class="hl-2"> }) </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-6">setContext</span><span class="hl-2">(() </span><span class="hl-5">=&gt;</span><span class="hl-2"> ({ </span><span class="hl-3">retryCount:</span><span class="hl-2"> </span><span class="hl-9">0</span><span class="hl-2"> }))</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p>[!WARNING]
The state machine's definition and configuration cannot be changed midway. Functions defined in <code>effects</code> and <code>guards</code> will continue to reference the values they had when initially defined. Therefore, caution is needed when directly observing state changes.</p>
</blockquote>
<p>Here is an example of how to use the React <code>useEffect</code> hook to update the component's state when the state machine's state changes. This works correctly.</p>
<pre><code class="typescript"><span class="hl-5">function</span><span class="hl-2"> </span><span class="hl-6">Component</span><span class="hl-2">(</span><span class="hl-3">props</span><span class="hl-2">: { </span><span class="hl-6">onActive</span><span class="hl-2">: () </span><span class="hl-5">=&gt;</span><span class="hl-2"> </span><span class="hl-10">void</span><span class="hl-2"> }) {</span><br/><span class="hl-2">  </span><span class="hl-5">const</span><span class="hl-2"> { </span><span class="hl-7">onActive</span><span class="hl-2"> } = </span><span class="hl-3">props</span><br/><span class="hl-2">  </span><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-0">/* State Machine Definition */</span><span class="hl-2">,</span><br/><span class="hl-2">    {</span><br/><span class="hl-2">      </span><span class="hl-3">effects:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-6">onActive</span><span class="hl-3">:</span><span class="hl-2"> () </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  )</span><br/><br/><span class="hl-2">  </span><span class="hl-6">useEffect</span><span class="hl-2">(() </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-1">if</span><span class="hl-2"> (</span><span class="hl-3">state</span><span class="hl-2">.</span><span class="hl-3">value</span><span class="hl-2"> === </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2">) {</span><br/><span class="hl-2">      </span><span class="hl-6">onActive</span><span class="hl-2">()</span><br/><span class="hl-2">    }</span><br/><span class="hl-2">  }, [</span><span class="hl-3">state</span><span class="hl-2">])</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>You might find the above example redundant and be tempted to write code like this. However, this could lead to bugs.</p>
<pre><code class="typescript"><span class="hl-5">function</span><span class="hl-2"> </span><span class="hl-6">Component</span><span class="hl-2">(</span><span class="hl-3">props</span><span class="hl-2">: { </span><span class="hl-6">onToggle</span><span class="hl-2">: (</span><span class="hl-3">isActive</span><span class="hl-2">: </span><span class="hl-10">boolean</span><span class="hl-2">) </span><span class="hl-5">=&gt;</span><span class="hl-2"> </span><span class="hl-10">void</span><span class="hl-2"> }) {</span><br/><span class="hl-2">  </span><span class="hl-5">const</span><span class="hl-2"> { </span><span class="hl-7">onToggle</span><span class="hl-2"> } = </span><span class="hl-3">props</span><br/><span class="hl-2">  </span><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-0">/* State Machine Definition */</span><span class="hl-2">,</span><br/><span class="hl-2">    {</span><br/><span class="hl-2">      </span><span class="hl-3">effects:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-6">onActive</span><span class="hl-3">:</span><span class="hl-2"> () </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-0">// If props.onToggle is changed, the change will not be reflected.</span><br/><span class="hl-2">          </span><span class="hl-0">// Always refers to the first defined value, which can lead to serious bugs.</span><br/><span class="hl-2">          </span><span class="hl-6">onToggle</span><span class="hl-2">()</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  )</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>Using <code>useRef</code> to always reference the latest function can avoid this issue.</p>
<pre><code class="typescript"><span class="hl-5">function</span><span class="hl-2"> </span><span class="hl-6">Component</span><span class="hl-2">(</span><span class="hl-3">props</span><span class="hl-2">: { </span><span class="hl-6">onToggle</span><span class="hl-2">: (</span><span class="hl-3">isActive</span><span class="hl-2">: </span><span class="hl-10">boolean</span><span class="hl-2">) </span><span class="hl-5">=&gt;</span><span class="hl-2"> </span><span class="hl-10">void</span><span class="hl-2"> }) {</span><br/><span class="hl-2">  </span><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-7">onToggle</span><span class="hl-2"> = </span><span class="hl-3">React</span><span class="hl-2">.</span><span class="hl-6">useRef</span><span class="hl-2">(</span><span class="hl-3">props</span><span class="hl-2">.</span><span class="hl-3">onToggle</span><span class="hl-2">)</span><br/><span class="hl-2">  </span><span class="hl-3">onToggle</span><span class="hl-2">.</span><span class="hl-3">current</span><span class="hl-2"> = </span><span class="hl-3">props</span><span class="hl-2">.</span><span class="hl-3">onToggle</span><br/><span class="hl-2">  </span><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-0">/* State Machine Definition */</span><span class="hl-2">,</span><br/><span class="hl-2">    {</span><br/><span class="hl-2">      </span><span class="hl-3">effects:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-6">onActive</span><span class="hl-3">:</span><span class="hl-2"> () </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-3">onToggle</span><span class="hl-2">.</span><span class="hl-6">current</span><span class="hl-2">(</span><span class="hl-5">true</span><span class="hl-2">)</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  )</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>However, the potential for human error still exists. Practically, it is recommended to use the constructor to transfer values dependent on React components.</p>
<pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">createMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">function</span><span class="hl-2"> </span><span class="hl-6">machine</span><span class="hl-2">(</span><br/><span class="hl-2">  </span><span class="hl-6">props</span><span class="hl-2">: () </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-3">initial</span><span class="hl-2">: </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2"> | </span><span class="hl-4">&quot;active&quot;</span><br/><span class="hl-2">    </span><span class="hl-3">onToggle</span><span class="hl-2">: ((</span><span class="hl-3">isActive</span><span class="hl-2">: </span><span class="hl-10">boolean</span><span class="hl-2">) </span><span class="hl-5">=&gt;</span><span class="hl-2"> </span><span class="hl-10">void</span><span class="hl-2">) | </span><span class="hl-10">undefined</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">) {</span><br/><span class="hl-2">  </span><span class="hl-1">return</span><span class="hl-2"> </span><span class="hl-6">createMachine</span><span class="hl-2">(</span><br/><span class="hl-2">    {</span><br/><span class="hl-2">      </span><span class="hl-3">initial:</span><span class="hl-2"> </span><span class="hl-6">props</span><span class="hl-2">().</span><span class="hl-3">initial</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-3">states:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">inactive:</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">          </span><span class="hl-3">effect:</span><span class="hl-2"> </span><span class="hl-4">&quot;onInactive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">        </span><span class="hl-3">active:</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">          </span><span class="hl-3">effect:</span><span class="hl-2"> </span><span class="hl-4">&quot;onActive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">    {</span><br/><span class="hl-2">      </span><span class="hl-3">effects:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-6">onActive</span><span class="hl-3">:</span><span class="hl-2"> ({ </span><span class="hl-3">context</span><span class="hl-2"> }) </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-5">const</span><span class="hl-2"> { </span><span class="hl-7">onToggle</span><span class="hl-2"> } = </span><span class="hl-6">props</span><span class="hl-2">()</span><br/><span class="hl-2">          </span><span class="hl-6">onToggle</span><span class="hl-2">?.(</span><span class="hl-5">true</span><span class="hl-2">)</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">        </span><span class="hl-6">onInactive</span><span class="hl-3">:</span><span class="hl-2"> ({ </span><span class="hl-3">context</span><span class="hl-2"> }) </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-5">const</span><span class="hl-2"> { </span><span class="hl-7">onToggle</span><span class="hl-2"> } = </span><span class="hl-6">props</span><span class="hl-2">()</span><br/><span class="hl-2">          </span><span class="hl-6">onToggle</span><span class="hl-2">?.(</span><span class="hl-5">false</span><span class="hl-2">)</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  )</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-5">function</span><span class="hl-2"> </span><span class="hl-6">ToggleButton</span><span class="hl-2">(</span><span class="hl-3">props</span><span class="hl-2">: { </span><span class="hl-6">onToggle</span><span class="hl-2">?: (</span><span class="hl-3">isActive</span><span class="hl-2">: </span><span class="hl-10">boolean</span><span class="hl-2">) </span><span class="hl-5">=&gt;</span><span class="hl-2"> </span><span class="hl-10">void</span><span class="hl-2"> }) {</span><br/><span class="hl-2">  </span><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><span class="hl-3">machine</span><span class="hl-2">, {</span><br/><span class="hl-2">    </span><span class="hl-3">initial:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-3">onToggle:</span><span class="hl-2"> </span><span class="hl-3">props</span><span class="hl-2">.</span><span class="hl-3">onToggle</span><span class="hl-2">,</span><br/><span class="hl-2">  })</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>A pre-defined machine in function form can accept a single argument. This argument must be a function. This function is a thin wrapper around <code>useRef</code> and always returns the latest value.</p>
<a id="md:extended-state" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Extended State<a href="#md:extended-state" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>In addition to a finite number of states, a state machine can have extended states (known as context). The <code>context</code> property is used to define the initial extended state, and the <code>setContext</code> function is used to update the extended state.</p>
<pre><code class="typescript"><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">initial:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-3">context:</span><span class="hl-2"> { </span><span class="hl-3">toggleCount:</span><span class="hl-2"> </span><span class="hl-9">0</span><span class="hl-2"> },</span><br/><span class="hl-2">    </span><span class="hl-3">states:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">inactive:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">      </span><span class="hl-3">active:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">        </span><span class="hl-3">effect:</span><span class="hl-2"> </span><span class="hl-4">&quot;onActive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">effects:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-6">onActive</span><span class="hl-3">:</span><span class="hl-2"> ({ </span><span class="hl-3">setContext</span><span class="hl-2"> }) </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-6">setContext</span><span class="hl-2">(</span><span class="hl-3">ctx</span><span class="hl-2"> </span><span class="hl-5">=&gt;</span><span class="hl-2"> ({ </span><span class="hl-3">toggleCount:</span><span class="hl-2"> </span><span class="hl-3">ctx</span><span class="hl-2">.</span><span class="hl-3">toggleCount</span><span class="hl-2"> + </span><span class="hl-9">1</span><span class="hl-2"> }))</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">)</span><br/><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-3">state</span><span class="hl-2">.</span><span class="hl-3">context</span><span class="hl-2">) </span><span class="hl-0">// { toggleCount: 0 }</span><br/><br/><span class="hl-6">send</span><span class="hl-2">(</span><span class="hl-4">&quot;TOGGLE&quot;</span><span class="hl-2">)</span><br/><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-3">state</span><span class="hl-2">.</span><span class="hl-3">context</span><span class="hl-2">) </span><span class="hl-0">// { toggleCount: 1 }</span>
</code><button type="button">Copy</button></pre>

<a id="md:schema" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Schema<a href="#md:schema" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>TypeScript automatically infers the types of context and events, but you can also explicitly define the state machine schema using the <code>$schema</code> property. This object is not used by the runtime.</p>
<p>The <code>$schema</code> property has three properties: <code>context</code>, <code>events</code>, and <code>strict</code>.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Property</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Required</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>context</code></td>
<td style="text-align:left"><code>any</code></td>
<td style="text-align:left">Defines the type of the state machine's extended state.</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>events</code></td>
<td style="text-align:left"><code>object</code></td>
<td style="text-align:left">Defines the type of the state machine's events.</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><code>strict</code></td>
<td style="text-align:left"><code>boolean</code></td>
<td style="text-align:left">Enables strict mode for the schema. When set to <code>true</code>, automatic inference is disabled, and any context and events not defined in the schema will cause a type error.</td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">$schema:</span><span class="hl-2"> {} </span><span class="hl-1">as</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">context</span><span class="hl-2">: {</span><br/><span class="hl-2">        </span><span class="hl-3">toggleCount</span><span class="hl-2">: </span><span class="hl-10">number</span><br/><span class="hl-2">      }</span><br/><span class="hl-2">      </span><span class="hl-3">events</span><span class="hl-2">: {</span><br/><span class="hl-2">        </span><span class="hl-3">TOGGLE</span><span class="hl-2">: {</span><br/><span class="hl-2">          </span><span class="hl-3">timestamp</span><span class="hl-2">: </span><span class="hl-10">Date</span><br/><span class="hl-2">        }</span><br/><span class="hl-2">      }</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">    </span><span class="hl-3">context:</span><span class="hl-2"> { </span><span class="hl-3">toggleCount:</span><span class="hl-2"> </span><span class="hl-9">0</span><span class="hl-2"> },</span><br/><span class="hl-2">    </span><span class="hl-3">initial:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-3">states:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">inactive:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">      </span><span class="hl-3">active:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">        </span><span class="hl-3">effect:</span><span class="hl-2"> </span><span class="hl-4">&quot;onActive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">effects:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-6">onActive</span><span class="hl-3">:</span><span class="hl-2"> ({ </span><span class="hl-3">event</span><span class="hl-2">, </span><span class="hl-3">setContext</span><span class="hl-2"> }) </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-3">event</span><span class="hl-2">)</span><br/><span class="hl-2">        </span><span class="hl-6">setContext</span><span class="hl-2">(</span><span class="hl-3">ctx</span><span class="hl-2"> </span><span class="hl-5">=&gt;</span><span class="hl-2"> ({ </span><span class="hl-3">toggleCount:</span><span class="hl-2"> </span><span class="hl-3">ctx</span><span class="hl-2">.</span><span class="hl-3">toggleCount</span><span class="hl-2"> + </span><span class="hl-9">1</span><span class="hl-2"> }))</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">)</span><br/><br/><span class="hl-6">send</span><span class="hl-2">(</span><span class="hl-4">&quot;TOGGLE&quot;</span><span class="hl-2">) </span><span class="hl-0">// Type Error !</span><br/><br/><span class="hl-6">send</span><span class="hl-2">({ </span><span class="hl-3">type:</span><span class="hl-2"> </span><span class="hl-4">&quot;TOGGLE&quot;</span><span class="hl-2">, </span><span class="hl-3">timestamp:</span><span class="hl-2"> </span><span class="hl-5">new</span><span class="hl-2"> </span><span class="hl-6">Date</span><span class="hl-2">() }) </span><span class="hl-0">// OK (^_^)b</span><br/><br/><span class="hl-0">// Logs: { type: &quot;TOGGLE&quot;, timestamp: 2024-01-01T00:00:00.000Z }</span>
</code><button type="button">Copy</button></pre>

<a id="md:logging" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Logging<a href="#md:logging" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>You can enable logging for your state machine if needed. Use the <code>verbose</code> property to set the logging level.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Value</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>0</code> or <code>false</code></td>
<td style="text-align:left">Disables logging.</td>
</tr>
<tr>
<td style="text-align:left"><code>1</code></td>
<td style="text-align:left">Logs onlyerrors. (Default)</td>
</tr>
<tr>
<td style="text-align:left"><code>2</code> or <code>true</code></td>
<td style="text-align:left">Logs errors and debug information.</td>
</tr>
</tbody>
</table>
<pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">initial:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-3">states:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">inactive:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">      </span><span class="hl-3">active:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">verbose:</span><span class="hl-2"> </span><span class="hl-9">2</span><span class="hl-2">,</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p>[!NOTE]
Logging is disabled if <code>process.env.NODE_ENV</code> is <code>&quot;production&quot;</code>.</p>
</blockquote>
<a id="md:usesharedmachine" class="tsd-anchor"></a><h2 class="tsd-anchor-link">useSharedMachine<a href="#md:usesharedmachine" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="https://tai-kun.github.io/use-machine-ts/functions/useSharedMachine.html">API Reference</a></p>
<p>To use <code>useSharedMachine</code>, you must use a state machine created with <code>createSharedMachine</code>.</p>
<pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useSharedMachine</span><span class="hl-2">, </span><span class="hl-3">createSharedMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-7">sharedMachine</span><span class="hl-2"> = </span><span class="hl-6">createSharedMachine</span><span class="hl-2">(</span><br/><span class="hl-2">   </span><span class="hl-0">/* State Machine Definition */</span><span class="hl-2">,</span><br/><span class="hl-2">   </span><span class="hl-0">/* State Machine Configuration (Optional) */</span><span class="hl-2">,</span><br/><span class="hl-2">)</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useSharedMachine</span><span class="hl-2">(</span><span class="hl-3">sharedMachine</span><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<p><code>useSharedMachine</code> works similarly to <code>useMachine</code>, but it allows you to manage state transitions from outside. It is essentially a wrapper around <code>useSyncExternalState</code> and <code>useEffect</code>. It can be likened to the relationship between <code>atom</code> and <code>useAtom</code>.</p>
<pre><code class="typescript"><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-7">machineAtom</span><span class="hl-2"> = </span><span class="hl-6">atom</span><span class="hl-2">() </span><span class="hl-0">/* Initial State */</span><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">setState</span><span class="hl-2">] = </span><span class="hl-6">useAtom</span><span class="hl-2">(</span><span class="hl-3">machineAtom</span><span class="hl-2">)</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-6">send</span><span class="hl-2"> = </span><span class="hl-3">event</span><span class="hl-2"> </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-7">nextState</span><span class="hl-2"> = </span><span class="hl-6">eventToNextState</span><span class="hl-2">(</span><span class="hl-3">event</span><span class="hl-2">, </span><span class="hl-3">state</span><span class="hl-2">)</span><br/><span class="hl-2">  </span><span class="hl-6">setState</span><span class="hl-2">(</span><span class="hl-3">nextState</span><span class="hl-2">)</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>A shared state machine is an object with six properties: <code>instance</code>, <code>dispatch</code>, <code>send</code>, <code>setContext</code>, <code>getState</code>, and <code>subscribe</code>.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Properties</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>instance</code></td>
<td style="text-align:left"><code>[Definition, Configuration?]</code></td>
<td style="text-align:left">The state machine instance.</td>
</tr>
<tr>
<td style="text-align:left"><code>dispatch</code></td>
<td style="text-align:left"><code>function</code></td>
<td style="text-align:left">A function to send events to the state machine. It is the primitive function used by send and setContext.</td>
</tr>
<tr>
<td style="text-align:left"><code>send</code></td>
<td style="text-align:left"><code>function</code></td>
<td style="text-align:left">A function to send events to the state machine.</td>
</tr>
<tr>
<td style="text-align:left"><code>setContext</code></td>
<td style="text-align:left"><code>function</code></td>
<td style="text-align:left">A function to update the state machine's extended state.</td>
</tr>
<tr>
<td style="text-align:left"><code>getState</code></td>
<td style="text-align:left"><code>function</code></td>
<td style="text-align:left">A function to get the current state of the state machine.</td>
</tr>
<tr>
<td style="text-align:left"><code>subscribe</code></td>
<td style="text-align:left"><code>function</code></td>
<td style="text-align:left">A function to watch for state changes in the state machine.</td>
</tr>
</tbody>
</table>
<a id="md:usesyncedmachine" class="tsd-anchor"></a><h2 class="tsd-anchor-link">useSyncedMachine<a href="#md:usesyncedmachine" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="https://tai-kun.github.io/use-machine-ts/functions/useSyncedMachine.html">API Reference</a></p>
<p>Unlike <code>useMachine</code>, it does not trigger re-rendering every time the state transitions. This hook provides a function that returns a snapshot of the state, not the current state.</p>
<pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useSyncedMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">getState</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useSyncedMachine</span><span class="hl-2">({</span><br/><span class="hl-2">  </span><span class="hl-3">initial:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-3">states:</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-3">inactive:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">    </span><span class="hl-3">active:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">})</span><br/><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-6">getState</span><span class="hl-2">())</span><br/><span class="hl-0">// { value: &quot;inactive&quot;, context: undefined,</span><br/><span class="hl-0">// event: { type: &quot;$init&quot; }, nextEvents: [&quot;TOGGLE&quot;] }</span><br/><br/><span class="hl-6">send</span><span class="hl-2">(</span><span class="hl-4">&quot;TOGGLE&quot;</span><span class="hl-2">)</span><br/><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-6">getState</span><span class="hl-2">())</span><br/><span class="hl-0">// { value: &quot;active&quot;, context: undefined,</span><br/><span class="hl-0">// event: { type: &quot;TOGGLE&quot; }, nextEvents: [&quot;TOGGLE&quot;] }</span>
</code><button type="button">Copy</button></pre>

<a id="md:async-orchestration" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Async Orchestration<a href="#md:async-orchestration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><blockquote>
<p>[!WARNING]
Whenever possible, avoid updating state asynchronously in use-machine-ts.</p>
</blockquote>
<p>When updating state asynchronously, several considerations arise depending on the specific hook used: <code>useMachine</code>, <code>useSharedMachine</code>, or <code>useSyncedMachine</code>.</p>
<a id="md:usemachine-1" class="tsd-anchor"></a><h2 class="tsd-anchor-link">useMachine<a href="#md:usemachine-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Within <code>useMachine</code>, you can call the <code>send</code> and <code>setContext</code> functions asynchronously as long as the component remains mounted. However, if the component has already been unmounted, these functions will instead display an error message indicating that the state cannot be updated:</p>
<pre><code class="console"><span class="hl-2">Cannot dispatch an action to the state machine after the component is unmounted.</span><br/><span class="hl-2">Action { type: &quot;SEND&quot;, payload: { type: &quot;TOGGLE&quot; } }</span>
</code><button type="button">Copy</button></pre>

<p>For <code>setContext</code>, the <code>type</code> property value will be <code>&quot;SET_CONTEXT&quot;</code>.</p>
<p>To check if the component is unmounted beforehand, you can utilize the <code>isMounted</code> property within the parameter passed to the <code>effect</code> function. The <code>isMounted</code> function returns <code>true</code> if the component is mounted, and <code>false</code> otherwise.</p>
<pre><code class="typescript"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useMachine</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;use-machine-ts&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-7">state</span><span class="hl-2">, </span><span class="hl-7">send</span><span class="hl-2">] = </span><span class="hl-6">useMachine</span><span class="hl-2">(</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">initial:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-3">states:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">inactive:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">      </span><span class="hl-3">active:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">on:</span><span class="hl-2"> { </span><span class="hl-3">TOGGLE:</span><span class="hl-2"> </span><span class="hl-4">&quot;inactive&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-3">effects:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-6">onActive</span><span class="hl-3">:</span><span class="hl-2"> ({ </span><span class="hl-3">send</span><span class="hl-2">, </span><span class="hl-3">isMounted</span><span class="hl-2"> }) </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-6">setTimeout</span><span class="hl-2">(() </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-1">if</span><span class="hl-2"> (</span><span class="hl-6">isMounted</span><span class="hl-2">()) {</span><br/><span class="hl-2">            </span><span class="hl-6">send</span><span class="hl-2">(</span><span class="hl-4">&quot;TOGGLE&quot;</span><span class="hl-2">)</span><br/><span class="hl-2">          }</span><br/><span class="hl-2">        }, </span><span class="hl-9">1000</span><span class="hl-2">)</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<a id="md:usesharedmachine-1" class="tsd-anchor"></a><h2 class="tsd-anchor-link">useSharedMachine<a href="#md:usesharedmachine-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>In <code>useSharedMachine</code>, you can call <code>send</code>, <code>setContext</code>, or the shared machine's <code>dispatch</code> asynchronously regardless of the component's mount state. No error or warning messages will be displayed. To check if the component is unmounted beforehand, you can use the <code>isMounted</code> function similarly to <code>useMachine</code>.</p>
<a id="md:usesyncedmachine-1" class="tsd-anchor"></a><h2 class="tsd-anchor-link">useSyncedMachine<a href="#md:usesyncedmachine-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Within <code>useSyncedMachine</code>, you cannot call the <code>send</code> and <code>setContext</code> functions asynchronously regardless of the component's mount state. These functions are unlocked at the beginning of an effect and locked after its completion. Calling these functions while locked will result in an error message:</p>
<pre><code class="console"><span class="hl-2">Send function not available. Must be used synchronously within an effect.</span><br/><span class="hl-2">State { value: &quot;inactive&quot;, event: { type: &quot;$init&quot; }, nextEvents: [&quot;TOGGLE&quot;], context: undefined }</span><br/><span class="hl-2">Event: { type: &quot;TOGGLE&quot; }</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><ul><li><a href="#md:respect"><span>Respect</span></a></li><li><a href="#md:basic-features"><span>Basic <wbr/>Features</span></a></li><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:sample-usage"><span>Sample <wbr/>Usage</span></a></li><li><a href="#md:todo"><span>TODO</span></a></li><li><a href="#md:contents"><span>Contents</span></a></li></ul><a href="#md:api"><span>API</span></a><ul><li><a href="#md:usemachine"><span>use<wbr/>Machine</span></a></li><li><ul><li><a href="#md:state"><span>state</span></a></li><li><a href="#md:send"><span>send</span></a></li><li><a href="#md:state-machine-definition"><span>State <wbr/>Machine <wbr/>Definition</span></a></li><li><a href="#md:state-machine-configuration"><span>State <wbr/>Machine <wbr/>Configuration</span></a></li><li><a href="#md:defining-states"><span>Defining <wbr/>States</span></a></li><li><a href="#md:using-guards"><span>Using <wbr/>Guards</span></a></li><li><a href="#md:using-effects"><span>Using <wbr/>Effects</span></a></li><li><a href="#md:extended-state"><span>Extended <wbr/>State</span></a></li><li><a href="#md:schema"><span>Schema</span></a></li><li><a href="#md:logging"><span>Logging</span></a></li></ul></li><li><a href="#md:usesharedmachine"><span>use<wbr/>Shared<wbr/>Machine</span></a></li><li><a href="#md:usesyncedmachine"><span>use<wbr/>Synced<wbr/>Machine</span></a></li></ul><a href="#md:async-orchestration"><span>Async <wbr/>Orchestration</span></a><ul><li><a href="#md:usemachine-1"><span>use<wbr/>Machine</span></a></li><li><a href="#md:usesharedmachine-1"><span>use<wbr/>Shared<wbr/>Machine</span></a></li><li><a href="#md:usesyncedmachine-1"><span>use<wbr/>Synced<wbr/>Machine</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>use-machine-ts</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
